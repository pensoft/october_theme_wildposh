url = "/media-center"
layout = "default"
title = "Media center"
is_hidden = 0
robot_index = "index"
robot_follow = "follow"
header_image = "header/media-center.jpg"

[siteSearchInclude]
==
<?php
use Pensoft\Media\Models\MediaLogos;
use Pensoft\Media\Models\Flyers;
use Pensoft\Media\Models\Graphic;
use Pensoft\Media\Models\Newsletters;
use Pensoft\Media\Models\Presentations;
use Pensoft\Media\Models\Pressreleases;
use Pensoft\Media\Models\Videos;
use Pensoft\Media\Models\Documents;
use System\Models\File;

function onStart(){
	$this['logos'] =  MediaLogos::get();
	$this['flyers'] =  Flyers::get();
	$this['graphics'] =  Graphic::get();
	$this['newsletters'] =  Newsletters::orderBy('date', 'desc')->get();
$this['presentations'] =  Presentations::get();
$this['pressreleases'] =  Pressreleases::orderBy('date', 'desc')->get();
$this['videos'] =  Videos::where('published_at', '<=', 'now()')->orderBy('published_at', 'desc')->get();
$this['illustrations'] =  Documents::get();



}


function onDownloadGuide(){
$pathToFile = base_path('storage/app/media/Visual Identity Guide_2021.pdf');
$fileName = "Visual_Identity_Guide_2021.pdf";
$headers = [
'HTTP/1.1 200 OK',
'Pragma: public',
'Content-Type: application/pdf'
];
return Response::download($pathToFile, $fileName, $headers);
}

function onDownloadArchive(){
$pathToFile = base_path('storage/app/media/WildPosh_logo_full_pack.rar');
$fileName = "WildPosh_logo_full_pack.rar";

return Response::download($pathToFile, $fileName);
}


function onDownloadFile(){
$file = File::find(post('id'));
$pathToFile = $file->getLocalPath();
$fileName = $file->file_name;
$fileType = $file->content_type;
$headers = [
'HTTP/1.1 200 OK',
'Pragma: public',
'Content-Type: '.$fileType,
'Content-Type: application/force-download'
];

return Response::download($pathToFile, $fileName, $headers);
}
?>
==
{% component 'siteSearchInclude' %}
<main id="main-content" role="main">
    <section class="container tabs" aria-labelledby="media-center-heading">
        <h1 id="media-center-heading" class="underline">Media center</h1>
        <nav class="row tabs_links" role="tablist" aria-label="Media center sections">

            {% if logos.count() %}
            <a href="#Brand-materials" class="logo" role="tab" aria-selected="false" aria-controls="Brand-materials">
                <span>Brand materials</span>
            </a>
            {% endif %}

            {% if flyers.count() %}
            <a href="#PromotionalMaterials" class="flyer" role="tab" aria-selected="false" aria-controls="PromotionalMaterials">
                <span>Promotional materials</span>
            </a>
            {% endif %}

            {% if pressreleases.count() %}
            <a href="#PressReleases" class="press" role="tab" aria-selected="false" aria-controls="PressReleases">
                <span>Press releases</span>
            </a>
            {% endif %}

            {% if newsletters.count() %}
            <a href="#Newsletters" class="newsletters" role="tab" aria-selected="false" aria-controls="Newsletters">
                <span>Newsletters</span>
            </a>
            {% endif %}

            {% if videos.count() %}
            <a href="#Videos" class="videos" role="tab" aria-selected="false" aria-controls="Videos">
                <span>Videos</span>
            </a>
            {% endif %}

            {% if presentations.count() %}
            <a href="#Presentation" class="presentations" role="tab" aria-selected="false" aria-controls="Presentation">
                <span>Project presentation</span>
            </a>
            {% endif %}

            {% if graphics.count() %}
            <a href="#Infographics" class="graphics" role="tab" aria-selected="false" aria-controls="Infographics">
                <span>Infographics</span>
            </a>
            {% endif %}

            {% if illustrations.count() %}
            <a href="#Illustrations" class="illustrations" role="tab" aria-selected="false" aria-controls="Illustrations">
                <span>Illustrations</span>
            </a>
            {% endif %}
        </nav>

        <!--tabs content	-->
        {% if pressreleases.count() %}
        <div class="row content_press" id="PressReleases" role="tabpanel" aria-labelledby="press-releases-heading">
            <div class="container">
                <h2 id="press-releases-heading">Press releases</h2>
                <div class="row">

                    {% for record in pressreleases %}
                    {% spaceless %}
                    <article class="col-xs-12">
                        <div class="press-release-container">
                            <h3 class="title">{{record.name}}</h3>
                            <time class="date" datetime="{{record.date|date('Y-m')}}">{{record.date |date('F Y')}}</time>
                            <div class="body">{{record.description | raw}}</div>
                            <div class="row link mt-1">
                                {% for link in record.link %}
                                <a href="{{link.url}}"
                                   target="_blank"
                                   rel="noopener noreferrer"
                                   class="btn btn-primary"
                                   aria-label="{{link.text}} (opens in new window)">{{link.text}}</a>
                                {% endfor %}
                            </div>
                        </div>
                    </article>


                    {% endspaceless %}
                    {% else %}
                    <div class="col-xs-12" role="status">
                        <p>{{ noRecordsMessage }}</p>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
        {% endif %}

        {% if flyers.count() %}
        <div class="row content_flyer" id="PromotionalMaterials" role="tabpanel" aria-labelledby="promotional-heading">
            <h2 id="promotional-heading">Promotional materials</h2>
            <ul class="flyers">

                {% for record in flyers %}
                {# Use spaceless tag to remove spaces inside the A tag. #}
                {% spaceless %}
                {% if record.flyer_image %}
                <li>
                    <h3 class="display-1">{{record.name}}</h3>
                    <div class="flyer_image_container">
                        <img src="{{record.flyer_image.thumb(338,340,{'mode':'crop'})}}" alt="{{record.name}} promotional material" style="max-width: 100%;">
                    </div>

                    {% if record.file_lang_versions.count() > 1 %}
                    <div class="row middle-xs center-xs">
                        Download &nbsp;
                        {% for brochure in record.file_lang_versions %}

                        {% set languages = brochure.title|split(' ') %}
                        {% if brochure.path %}
                            {{form_open({ request: 'onDownloadFile' }) }}
                            <input type="hidden" value="{{brochure.id}}" name="id">
                            <button type="submit"
                                    class="btn btn-primary"
                                    data-attach-loading
                                    aria-label="Download {{brochure.title}}">{{languages[1]}}</button>
                            {{ form_close() }}
                        {% endif %}
                        &nbsp;
                        {% endfor%}
                    </div>
                    {% elseif record.file_lang_versions.count() == 1 %}

                    <div class="row">
                        {% for file in record.file_lang_versions %}
                        <div class="col-md col-xs-12">
                            {{form_open({ request: 'onDownloadFile' }) }}
                            <input type="hidden" value="{{file.id}}" name="id">
                            <button type="submit"
                                    class="btn btn-primary"
                                    data-attach-loading
                                    aria-label="Download {{record.name}} in {{file.title}}">Download ({{file.title}})</button>
                            {{ form_close() }}
                        </div>

                        {% endfor %}
                    </div>
                    {% else %}
                    {{form_open({ request: 'onDownloadFile' }) }}
                    <input type="hidden" value="{{record.file.id}}" name="id">
                    <button type="submit"
                            class="btn btn-primary"
                            data-attach-loading
                            aria-label="Download {{record.name}}">Download</button>
                    {{ form_close() }}
                    {% endif %}

                </li>


                {% endif %}

                {% endspaceless %}
                {% else %}
                <li role="status">{{ noRecordsMessage }}</li>
                {% endfor %}
            </ul>
        </div>
        {%endif%}

        {% if presentations.count() %}
        <div class="row content_presentaion" id="Presentation" role="tabpanel" aria-labelledby="presentations-heading">

            <div class="container">
                <h2 id="presentations-heading">Presentations</h2>
                <div class="row">
                    {% for record in presentations %}
                    {% spaceless %}
                    {% if record.presentation_image %}
                    <article class="col-xs-12 col-lg-6 center-xs">
                        <div class="story broshure_and_poster">
                            <a href="{{record.file.path}}"
                               target="_blank"
                               rel="noopener noreferrer"
                               aria-label="View {{record.name}} presentation (opens in new window)">
                                <img src="{{record.presentation_image.thumb(812,454,{'mode':'crop'})}}" alt="{{record.name}} presentation preview">
                            </a>
                        </div>
                        {% if record.file %}

                        {{form_open({ request: 'onDownloadFile' }) }}
                        <input type="hidden" value="{{record.file.id}}" name="id">
                        <button type="submit"
                                class="btn btn-primary"
                                data-attach-loading
                                aria-label="Download {{record.name}} presentation">Download</button>
                        {{ form_close() }}

                        {% endif %}
                    </article>
                    {% endif %}

                    {% endspaceless %}
                    {% else %}
                    <div role="status">
                        <p>{{ noRecordsMessage }}</p>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
        {% endif %}

        {% if videos.count() %}
        <div class="row content_video" id="Videos" role="tabpanel" aria-labelledby="videos-heading">

            <div class="container">
                <h2 id="videos-heading">Videos</h2>
                <div class="row">

                    {% for record in videos %}
                    {% spaceless %}
                    <article class="col-md-6 col-xs-12 video-container">

                        {% if record.file %}
                        <video controls width="100%" aria-label="{{record.name}}">
                            <source src="{{record.file.path}}#t=0.5" type="video/mp4">
                            Your browser does not support the video tag.
                        </video>
                        <h3 class="video-title">{{record.name}}</h3>
                        <p>Attachment: {{record.file.file_name}}, {{record.file.size}}</p>

                        <p>
                            {{form_open({ request: 'onDownloadFile' }) }}
                            <input type="hidden" value="{{record.file.id}}" name="id">
                            <button type="submit"
                                    class="btn btn-primary"
                                    data-attach-loading
                                    aria-label="Download {{record.name}} video">Download</button>
                            {{ form_close() }}
                        </p>

                        {% endif %}

                        {% if record.youtube_url %}
                        <iframe allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"
                                allowfullscreen
                                src="{{record.youtube_url}}"
                                width="100%"
                                height="448"
                                title="{{record.name}} on YouTube"
                                loading="lazy"></iframe>
                        <h3 class="video-title">{{record.name}}</h3>
                        {% endif %}

                        {% if record.vimeo_url %}
                        <iframe width="100%"
                                height="448"
                                allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"
                                allowfullscreen
                                src="{{record.vimeo_url}}"
                                title="{{record.name}} on Vimeo"
                                loading="lazy"></iframe>
                        <h3 class="video-title">{{record.name}}</h3>
                        {% endif %}
                    </article>




                    {% endspaceless %}
                    {% else %}
                    <div role="status">
                        <p>{{ noRecordsMessage }}</p>
                    </div>
                    {% endfor %}
                </div>
            </div>

        </div>
        {% endif %}

        {% if logos.count() %}
        <div class="row content_logo" id="Brand-materials" role="tabpanel" aria-labelledby="brand-materials-heading">
            <h2 id="brand-materials-heading">Brand materials</h2>
            <div class="row top-xs">
                {% for record in logos %}
                {% spaceless %}
                {% if record.logo_image %}

                <article class="col-md-3 col-xs-12 mb-2">
                    <div class="logo-container {{record.name}}">
                        <img src="{{record.logo_image.path}}" alt="{{record.name}} logo">
                    </div>
                    <div class="links">
                        {% if record.file_jpg %}
                        {{form_open({ request: 'onDownloadFile' }) }}
                        <input type="hidden" value="{{record.file_jpg.id}}" name="id">
                        <button type="submit"
                                data-attach-loading
                                class="btn btn-primary"
                                aria-label="Download {{record.name}} logo in JPG format">jpg</button>
                        {{ form_close() }}
                        {% endif %}

                        {% if record.file_png %}
                        {{form_open({ request: 'onDownloadFile' }) }}
                        <input type="hidden" value="{{record.file_png.id}}" name="id">
                        <button type="submit"
                                data-attach-loading
                                class="btn btn-primary"
                                aria-label="Download {{record.name}} logo in PNG format">png</button>
                        {{ form_close() }}
                        {% endif %}

                        {% if record.file_eps %}
                        {{form_open({ request: 'onDownloadFile' }) }}
                        <input type="hidden" value="{{record.file_eps.id}}" name="id">
                        <button type="submit"
                                data-attach-loading
                                class="btn btn-primary"
                                aria-label="Download {{record.name}} logo in SVG vector format">svg</button>
                        {{ form_close() }}
                        {% endif %}


                        {% if record.file_pdf %}
                        <a class="btn btn-primary"
                           href="{{record.file_pdf.path}}"
                           target="_blank"
                           rel="noopener noreferrer"
                           aria-label="Download {{record.name}} logo in PDF format (opens in new window)">pdf</a>
                        {% endif %}

                    </div>
                </article>
                {% endif %}

                {% endspaceless %}
                {% else %}
                <div role="status">
                    <p>{{ noRecordsMessage }}</p>
                </div>
                {% endfor %}
            </div>
        </div>
        {% endif %}

        {% if graphics.count() %}
        <div class="row content_flyer" id="Infographics" role="tabpanel" aria-labelledby="infographics-heading">
            <div class="container">
                <h2 id="infographics-heading">Infographics</h2>

                <ul class="row flyers">

                    {% for record in graphics %}
                    {# Use spaceless tag to remove spaces inside the A tag. #}
                    {% spaceless %}
                    {% if record.image %}
                    <li class="col-lg-4 col-xs-12">
                        <h3 class="display-1">{{record.name}}</h3>
                        <div class="flyer_image_container">
                            <img src="{{record.image.thumb(auto,401,{'mode':'crop'})}}" alt="{{record.name}} infographic">
                        </div>
                        {{form_open({ request: 'onDownloadFile' }) }}
                        <input type="hidden" value="{{record.file.id}}" name="id">
                        <button type="submit"
                                class="btn btn-primary"
                                data-attach-loading
                                aria-label="Download {{record.name}} infographic">Download</button>
                        {{ form_close() }}

                    </li>


                    {% endif %}

                    {% endspaceless %}
                    {% else %}
                    <li role="status">{{ noRecordsMessage }}</li>
                    {% endfor %}
                </ul>
            </div>

        </div>
        {%endif%}

        {% if illustrations.count() %}
        <div class="row content_flyer" id="Illustrations" role="tabpanel" aria-labelledby="illustrations-heading">
            <div class="container">

                <h2 id="illustrations-heading">Illustrations</h2>
                <ul class="row flyers">

                    {% for record in illustrations %}
                    {# Use spaceless tag to remove spaces inside the A tag. #}
                    {% spaceless %}
                    {% if record.image %}
                    <li class="col-lg-4 col-xs-12">
                        <h3 class="display-1">{{record.title}}</h3>
                        <div class="flyer_image_container">
                            <img src="{{record.image.thumb(auto,401,{'mode':'crop'})}}" alt="{{record.title}} illustration">
                        </div>
                        {{form_open({ request: 'onDownloadFile' }) }}
                        <input type="hidden" value="{{record.file.id}}" name="id">
                        <button type="submit"
                                class="btn btn-primary"
                                data-attach-loading
                                aria-label="Download {{record.title}} illustration">Download</button>
                        {{ form_close() }}

                    </li>


                    {% endif %}

                    {% endspaceless %}
                    {% else %}
                    <li role="status">{{ noRecordsMessage }}</li>
                    {% endfor %}
                </ul>
            </div>

        </div>
        {%endif%}

        {% if newsletters.count() %}
        <div class="row content_newsletter" id="Newsletters" role="tabpanel" aria-labelledby="newsletters-heading">
            <h2 id="newsletters-heading">Newsletters</h2>
            <div class="container">

                <ul class="row newsletters">
                    {% for record in newsletters %}
                    {# Use spaceless tag to remove spaces inside the A tag. #}
                    {% spaceless %}
                    {% if record.newsletter_image %}
                    <li class="col-lg-3 col-xs-12">
                        <h3 class="title">{{record.name}}</h3>
                        <div class="">
                            <a href="{{record.url}}"
                               target="_blank"
                               rel="noopener noreferrer"
                               aria-label="Read {{record.name}} newsletter (opens in new window)">
                                <img src="{{record.newsletter_image.thumb(auto,448,{'mode':'crop'})}}" alt="{{record.name}} newsletter cover" style="max-width: 100%;">
                            </a>
                        </div>
                        {% if record.url %}
                        <a href="{{record.url}}"
                           target="_blank"
                           rel="noopener noreferrer"
                           class="btn btn-primary"
                           style="margin: 0 auto;"
                           aria-label="Read {{record.name}} newsletter (opens in new window)">Read the newsletter</a>
                        {% else %}
                        {{form_open({ request: 'onDownloadFile' }) }}
                        <input type="hidden" value="{{record.file.id}}" name="id">
                        <button type="submit"
                                class="btn btn-primary"
                                data-attach-loading
                                aria-label="Download {{record.name}} newsletter">Download</button>
                        {{ form_close() }}
                        {% endif %}

                    </li>
                    {% endif %}
                    {% endspaceless %}
                    {% else %}
                    <li role="status">{{ noRecordsMessage }}</li>
                    {% endfor %}
                </ul>
            </div>
        </div>
        {%endif%}

        <!-- end  content	-->
    </section>
</main>
